#pragma once

#include <Windows.h>

namespace PhysicalMemory
{
	struct PhysicalMemoryRange
	{
		uintptr_t start;
		uintptr_t end;

		HANDLE handle = nullptr;
		uintptr_t sectionAddress;
		PVOID objectAddress = nullptr;

		uintptr_t translate(uintptr_t address) const
		{
			return sectionAddress + (address - start);
		}
	};

	bool openPhysicalMemory();
	bool closePhysicalMemory();

	bool readPhysicalMemory(uintptr_t address, void* buffer, size_t size);
	bool writePhysicalMemory(uintptr_t address, const void* buffer, size_t size);

	const PhysicalMemoryRange* getPhysicalMemoryRange(uintptr_t address);
}